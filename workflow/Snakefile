from snakemake.utils import min_version
min_version("7.12.1")

configfile: "workflow/config.yaml"

iterations = config["iterations"]
init_tree = config["init_tree"]
iter_tree = config["iter_tree"]

finalMSA  = config["work_dir"]+"/msa_iter"+str(iterations)+".fa"
finalTree = config["work_dir"]+"/tree_iter"+str(iterations)+".nwk"
finalFile = finalTree if config["final_tree"] == "yes" else finalMSA

include: "rules/twilight.smk"

if (init_tree == "mashtree"):
	include: "rules/mashtree.smk"
elif (init_tree == "maffttree"):
	include: "rules/maffttree.smk"
elif (init_tree == "parttree"):
	include: "rules/parttree.smk"

if (iter_tree == "fasttree"):
	include: "rules/fasttree.smk"
elif (iter_tree == "iqtree"):
	include: "rules/iqtree.smk"
elif (iter_tree == "raxml"):
	include: "rules/raxml.smk"

rule all:
	input: finalFile
	